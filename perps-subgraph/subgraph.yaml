specVersion: 0.0.5
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: PerpsV2MarketProxyable
    network: optimism
    source:
      address: '0x2B3bb4c683BFc5239B029131EEf3B1d214478d93'
      abi: PerpsV2MarketProxyable
      startBlock: 6175244
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - PositionLiquidated
        - FuturesPosition
        - Trader
        - Synthetix
      abis:
        - name: PerpsV2MarketProxyable
          file: ./abis/PerpsV2MarketProxyable.json
      eventHandlers:
        # - event: 'MarginTransferred(indexed address,int256)'
        #   handler: 'handleMarginTransferred'
        # - event: 'PositionModified(indexed uint256,indexed address,uint256,int256,int256,uint256,uint256,uint256)'
        #   handler: 'handlePositionModified'
        - event: 'PositionLiquidated(uint256,address,address,int256,uint256,uint256)'
          handler: 'handlePositionLiquidated'
        # - event: 'DelayedOrderSubmitted(indexed address,bool,int256,uint256,uint256,uint256,uint256,uint256,bytes32)'
        #   handler: 'handleDelayedOrderSubmitted'
        # - event: 'DelayedOrderRemoved(indexed address,bool,uint256,int256,uint256,uint256,uint256,bytes32)'
        #   handler: 'handleDelayedOrderRemoved'
      file: ./src/futures.ts
